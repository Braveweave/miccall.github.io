<!DOCTYPE html>
<html lang="zh">
    <head>
    <!-- 
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.0 -->

    <!-- Title -->
    
    <title>
        
            Unity 3d 实现物体跟随摄像机视野运动 | 
        
        Mr.Metro
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/fav.jpg">
    <link rel="icon" sizes="192x192" href="/img/fav.jpg">
    <link rel="apple-touch-icon" href="/img/fav.jpg">

    <!-- Meta & Info -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="miccall">
    <meta name="description" content="Blog of miccall is records about my work">
    <meta name="keywords" content="miccall,unity 3d">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Mr.Metro">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://miccall.tech">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Unity 3d 实现物体跟随摄像机视野运动 | Mr.Metro">
    <meta property="og:description" content="Blog of miccall is records about my work">
    <meta property="og:article:tag" content="unity 3d"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #7EC0EE !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #7EC0EE !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #7EC0EE !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }
</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/img/bg.png);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>



    <script src="/js/jquery.min.js"></script>
    <script src="/js/queue.js"></script>

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    

    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Unity-3d-实现物体跟随摄像机视野运动"><span class="post-toc-number">1.</span> <span class="post-toc-text">Unity 3d 实现物体跟随摄像机视野运动 </span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#Created-by-miccall-（转载请注明出处-miccall-tech-）"><span class="post-toc-number">1.0.0.0.0.1.</span> <span class="post-toc-text">Created by miccall    （转载请注明出处  miccall.tech  ）</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-VR实现机器人导航"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">1. VR实现机器人导航</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-问题思考"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">2. 问题思考</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-实现以及方法"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">3.实现以及方法</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-中途出现的小BUG"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">4.中途出现的小BUG</span></a></li></ol></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(http://img.blog.csdn.net/20170312182308424?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzE0MTE4MjU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)">
    
            <p class="article-headline-p">
                Unity 3d 实现物体跟随摄像机视野运动
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/BA201701210404530018-00-000000.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>miccall</strong>
        <span>3月 12, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
            <i class="material-icons" role="presentation">devices other</i>
            <span class="visuallyhidden">devices other</span>
        </button>
        <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
            <li class="mdl-menu__item">在其它设备中阅读本文章</li>
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ4AAAEOCAAAAABd2qZ5AAADlElEQVR42u3aQW7jQAwEwPz/07vXAFk73eSM7QVKp8CWJU3pwJDTX38c344vBDhw4MCBAwcOHDhwfDDHV3w8/9XPb/9x42+fP7/L8zu21/zlaXHgwIEDxwWOX0rRgwfNUfJv818l5z9fCw4cOHDguM2Rl73Z5zPQ/C6zteDAgQMHjk/jeHSF5JPn92obSBw4cODA8T9ybJYxG0pumkYcOHDgwPFejnygli9pNtrLafZrwYEDBw4cNzjaUvfJf78034EDBw4cOH5w7I9Z09VC58urnx8HDhw4cBzlmEXW2vhCi5Kc2YYqHp6JAwcOHDgucOTxhRtFera86x0tDhw4cOA4NBxMAgpJfG0Wtms3qPKGsC60OHDgwIFjxJH/OI815MV1FnqbDQeLbSccOHDgwLHmmA0K90O9vGTOAnlRsceBAwcOHNc49ltKeQOWBxpmpTr/VwAHDhw4cJzlaENsbfOWRxbyQt62iAcCDThw4MCBo+Sot2qCBiy5QvtiNq0jDhw4cOB4F0e+yDbo0JbeU/f65TXgwIEDB46jHO2Yr4XLQwb5QPBUM4kDBw4cOF7DMVtY8qCzVi2PUMwCfzhw4MCB4yxHHiOYbfPko73Z6LCNO+DAgQMHjtscbYPUFsK89LbXbDfJcODAgQPH6zlmQ7qEKS/VbTyi3bLCgQMHDhyv52i/ncUU8jYsL/lJI4cDBw4cOG5z7ONoOcepyF3bsOHAgQMHjtdzbMIHs8BB3mi1kYW64cSBAwcOHEc52taoLbo5xz4e0ULgwIEDB457HG3TdWOcly9pNqZ8eD4OHDhw4DjKUWzPjMpn2/7l7Vz7VKuOFgcOHDhwjDhmW02rwVw58tsMB+ttJxw4cODAMeJILpG3fO2S2mvuf4UDBw4cOG5zzJqovADnS8qPlv7YcBAHDhw4cMTbTvv2LLnO7NHzQj58eThw4MCB4yhHu6kza8baop6z5teJonI4cODAgWPNMWuf8uhAu7ykCdzcvZ6V4sCBAweOkqMtV7OWL1nMqdYOBw4cOHB8Ake+zZN/nhfFpDC3r6EoyThw4MCB4xpHHmKYLaClSZ6qpV9F5XDgwIEDxwWOTaxhFkpor9y+Bhw4cODA8V6O5Mb5gmcjwuR5iheAAwcOHDiucbTDwU0k4kar1kb9cODAgQPHPY72lnm7lZ8ziy/khbwotDhw4MCBY8HhwIEDBw4cOHDgwIEDx4cdfwEjXjm6GKHhsQAAAABJRU5ErkJggg==">
        </ul>
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/unity-3d/">unity 3d</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Unity 3d 实现物体跟随摄像机视野运动&url=http://miccall.tech//2017/03/12/unity3d/Unity 3d 实现物体跟随摄像机视野运动/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Unity 3d 实现物体跟随摄像机视野运动&url=http://miccall.tech//2017/03/12/unity3d/Unity 3d 实现物体跟随摄像机视野运动/index.html&via=miccall" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://miccall.tech//2017/03/12/unity3d/Unity 3d 实现物体跟随摄像机视野运动/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=Mr.Metro&title=Unity 3d 实现物体跟随摄像机视野运动&summary=Blog of miccall is records about my work&pics=http://miccall.tech/img/fav.jpg&url=http://miccall.tech/2017/03/12/unity3d/Unity 3d 实现物体跟随摄像机视野运动/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <hr>
<h1 id="Unity-3d-实现物体跟随摄像机视野运动"><a href="#Unity-3d-实现物体跟随摄像机视野运动" class="headerlink" title="Unity 3d 实现物体跟随摄像机视野运动 "></a><strong>Unity 3d 实现物体跟随摄像机视野运动 </strong></h1><h6 id="Created-by-miccall-（转载请注明出处-miccall-tech-）"><a href="#Created-by-miccall-（转载请注明出处-miccall-tech-）" class="headerlink" title="Created by miccall    （转载请注明出处  miccall.tech  ）"></a>Created by miccall    （转载请注明出处  <a href="http://miccall.tech">miccall.tech</a>  ）</h6><h2 id="1-VR实现机器人导航"><a href="#1-VR实现机器人导航" class="headerlink" title="1. VR实现机器人导航"></a>1. VR实现机器人导航</h2><ul>
<li>项目里要求一个机器人跟随在角色旁边，一直飞着，就像一个精灵一样，总在主角的身边，移动，转头，都要移动到合适的位置 。还得让他面向主角，今天就来实现这个样例 。 </li>
</ul>
<h2 id="2-问题思考"><a href="#2-问题思考" class="headerlink" title="2. 问题思考"></a>2. 问题思考</h2><pre><code>- 1. 物体移动到某个给定的位置（target）
- 2. 物体转动到面向摄像机 
- 3. 出现在相机的视野当中 
- 4. 自定义物体在摄影机的Screen中的位置 
</code></pre><h2 id="3-实现以及方法"><a href="#3-实现以及方法" class="headerlink" title="3.实现以及方法"></a>3.实现以及方法</h2><ul>
<li>移动的话 ，本来可以用动画来实现 ，因为动画还没有做好，我就用一个cube当作那个机器人做样例了 。 </li>
<li>首先有个cube之后 ，给他放一个移动的脚本。这里我给他命名为PlayerTank 。</li>
<li>我们的目的就是让他运动到某个target ，所以我们得给他指定一个followTransform 。 同时还有他的移动速度和转动速度 。</li>
<li>为了使他移动不是很突兀，我的思路是他先转动到面向follow物体，然后在直线移动到给物体 。所以算法很快写好了 。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">void LookTransform(Transform Mtransform)</div><div class="line">    &#123;</div><div class="line">        Vector3 tarPos = Mtransform.position;</div><div class="line">        Vector3 dirRot = tarPos - transform.position;</div><div class="line">        Quaternion tarRot = Quaternion.LookRotation(dirRot);</div><div class="line">        transform.rotation = Quaternion.Slerp(transform.rotation, tarRot, rotSpeed * Time.deltaTime);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<ul>
<li>简单解释一下，就是先确定物体的位置，然后求出指向他的方向，并用插值的方法，<br>让物体转动到面向指定的物体 。<br>好了，既然有了朝向的运动方向，那么走到这方向，就很简单了。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">transform.Translate(new Vector3(0, 0, movementSpeed * Time.deltaTime));</div></pre></td></tr></table></figure>
<ul>
<li>那么什么时候停止运动呢 ，我想了一下，决定用位置的差来判断<br>就是</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Vector3.Distance(transform.position, followTransform.position);</div></pre></td></tr></table></figure>
<ul>
<li>好了，既然停止的方法也有了，最后要解决的问题就是朝向摄像机了。<br>   突然一想，这是问题么，对，这不是问题 ，哈哈，刚刚写的那个算法，给一个摄像机就解决了嘛 。<br>   然后给出具体的判断逻辑 。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//该物体 接近要  到达的目标   指定位置后就停止  </div><div class="line">if (Vector3.Distance(transform.position, followTransform.position) &lt; 3f)</div><div class="line">&#123;</div><div class="line">    //当物体道到位置时 让物体面 向摄像机 </div><div class="line">    LookTransform(Camre);</div><div class="line">    return;</div><div class="line">&#125;</div><div class="line">else</div><div class="line">&#123;</div><div class="line">    //让物体转向 将要运动 的方向 </div><div class="line">    LookTransform(followTransform);</div><div class="line">    transform.Translate(new Vector3(0, 0, movementSpeed * Time.deltaTime));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>这样就解决了物体移动到target了，下一步就是固定target的位置，让他在摄像机的固定位置了 。<br>新建一个脚本文件CameraView，挂在摄像机上。为了方便调试，我又用了FPS脚本，<br>就是第一人称视角跟随鼠标转动，就跟cs里面的玩法一样，（百度一大推代码）。<br>第二个调试算法是一个国外大牛写的 ，他可以给定一个距离，画出摄像机的视野范围</li>
</ul>
<p><img src="http://img.blog.csdn.net/20170312173313807?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzE0MTE4MjU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<ul>
<li>这里我画了两个边 ，一个是距离摄像机8.5米 用黄色表示，距离摄像机12米的用红色表示。<pre><code>应为篇幅问题和详略问题，这里不多解释这个算法，有兴趣的可以去研究一下，这里我们引用一下就行了。
</code></pre></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">Vector3[] GetCorners(float distance)</div><div class="line">    &#123;</div><div class="line">        Vector3[] corners = new Vector3[4];</div><div class="line"></div><div class="line">        float halfFOV = (theCamera.fieldOfView * 0.5f) * Mathf.Deg2Rad;</div><div class="line">        float aspect = theCamera.aspect;</div><div class="line"></div><div class="line">        float height = distance * Mathf.Tan(halfFOV);</div><div class="line">        float width = height * aspect;</div><div class="line"></div><div class="line">        // UpperLeft</div><div class="line">        corners[0] = tx.position - (tx.right * width);</div><div class="line">        corners[0] += tx.up * height;</div><div class="line">        corners[0] += tx.forward * distance;</div><div class="line"></div><div class="line">        // UpperRight</div><div class="line">        corners[1] = tx.position + (tx.right * width);</div><div class="line">        corners[1] += tx.up * height;</div><div class="line">        corners[1] += tx.forward * distance;</div><div class="line"></div><div class="line">        // LowerLeft</div><div class="line">        corners[2] = tx.position - (tx.right * width);</div><div class="line">        corners[2] -= tx.up * height;</div><div class="line">        corners[2] += tx.forward * distance;</div><div class="line"></div><div class="line">        // LowerRight</div><div class="line">        corners[3] = tx.position + (tx.right * width);</div><div class="line">        corners[3] -= tx.up * height;</div><div class="line">        corners[3] += tx.forward * distance;</div><div class="line"></div><div class="line">        return corners;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">void FindUpperCorners()</div><div class="line">&#123;</div><div class="line">        Vector3[] corners = GetCorners(upperDistance);</div><div class="line">        // for debugging</div><div class="line">        Debug.DrawLine(corners[0], corners[1], Color.yellow); // UpperLeft -&gt; UpperRight</div><div class="line">        Debug.DrawLine(corners[1], corners[3], Color.yellow); // UpperRight -&gt; LowerRight</div><div class="line">        Debug.DrawLine(corners[3], corners[2], Color.yellow); // LowerRight -&gt; LowerLeft</div><div class="line">        Debug.DrawLine(corners[2], corners[0], Color.yellow); // LowerLeft -&gt; UpperLeft</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>debug的时候，直接调用FindUpperCorners()就可以了 。<br>刚开始的时候 ，我就用的这个调试 ，给出一个位置，然后计算他的偏移量，调试了很久，没有一个良好的效果，我决定换个思路了 ，为了普遍大众 ，我还是把这个调试方法贴出来了，有需要的可以试试 。<br>第二个我就去翻api了 ，因为我貌似记得有个屏幕坐标和世界坐标转化的什么鬼方法来着。果然不出我所料，这个方法的确是相当的好用的呀 。<br>试了一下官方给的调试方法，画了一个点出来 。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">void OnDrawGizmosSelected()</div><div class="line">&#123;</div><div class="line">    Vector3 p = theCamera.ScreenToWorldPoint(new Vector3(100, 200, 8));</div><div class="line">    Gizmos.color = Color.blue;</div><div class="line">    //target.position = p;</div><div class="line">    Gizmos.DrawSphere(p, 1F);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>好了，就连我最后决定用的位置也标明了。<br>然后，我就写了一个很简单的方法来达到目的。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">void maketarget()</div><div class="line">&#123;</div><div class="line">    Vector3 p = theCamera.ScreenToWorldPoint(new Vector3(RH, RV, upperDistance));</div><div class="line">    target.position = p;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>写完我都吓了一跳 ，竟然如此简单。还是简单解释一下 ，RH 是水平偏移量，RV是垂直偏移量，upperDistance是距离摄像机的一个平面位置 。<pre><code>接下来就是运行看效果了 。
</code></pre></li>
</ul>
<h2 id="4-中途出现的小BUG"><a href="#4-中途出现的小BUG" class="headerlink" title="4.中途出现的小BUG"></a>4.中途出现的小BUG</h2><p>-<br>       莫名其妙的做圆周运动 ，然后我分析了线速度，角速度和半径的关系 ，<br>       然后总结出一个基本的规律，他应该是当运动到某个特定的位置 ，正好满足了<br>       圆周运动的关系，然后我们调整movementSpeed 和rotSpeed 的值，让他么尽可能<br>       的和Distance消除乘积关系，这样出现的几率就微乎其微了 。<br>       感想 – 其实unity和现实物理，理论物理 还是有很大的不同。</p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    


    <!-- 使用 DISQUS -->
    <div id="disqus-comment">
        <div id="disqus_thread"></div>
<script>
    queue.offer(function() {
            var disqus_config = function () {
                this.page.url = 'http://miccall.tech/2017/03/12/unity3d/Unity 3d 实现物体跟随摄像机视野运动/index.html';  // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };

            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document;
                var s = d.createElement('script');
                s.src = '//http-miccall-tech.disqus.com/embed.js';
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
            })();
        });
</script>

    </div>
    <style>
        #disqus-comment{
            background-color: #eee;
            padding: 2pc;
        }
    </style>



                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2017/03/14/unity3d/shader forge 插件笔记(一)/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/02/02/leapmotion/LEAPMotion猎户座(VR)开发-003-UI/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/preview.gif);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/BA201701210404530018-00-000000.png" alt="miccall's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        316459829@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:316459829@qq.com.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
                <li>
                    <a href="http://shang.qq.com/email/stop/email_stop.html?qq=316459829&amp;sig=a1c657365db7e82805ea4b2351081fc3ebcde159f8ae49b1&amp;tttt=1" target="_blank" title="腾讯 QQ">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">phone</i>
                        
                        腾讯 QQ
                    </a>
                </li>
            
                <li>
                    <a href="http://blog.csdn.net/qq_31411825" target="_blank" title="CSDN">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">user</i>
                        
                        CSDN
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">19</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    
        <li>
            <a href="/about/" title="About Me">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                About Me
            </a>
        </li>
        
    
        <li>
            <a href="/group/" title="About Group">
                
                    <i class="material-icons sidebar-material-icons">group</i>
                
                About Group
            </a>
        </li>
        
    
        <li>
            <a href="/gallery/" title="My Grally">
                
                    <i class="material-icons sidebar-material-icons">image</i>
                
                My Grally
            </a>
        </li>
        
    
        <li>
            <a href="/tag/" title="Tag">
                
                    <i class="material-icons sidebar-material-icons">expore</i>
                
                Tag
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;Mr.Metro
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->
<script src="/js/lazyload.min.js"></script>
<script src="/js/js.min.js"></script>
<script src="/js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>



    <script src="/js/smoothscroll.js"></script>









    <!-- 使用 DISQUS js 代码 -->
    <script id="dsq-count-scr" src="//http-miccall-tech.disqus.com/count.js" async></script>



<!-- Swiftye -->


<!-- Local Search-->


<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->


                </main>
            </div>
        </body>
    
</html>
