<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.4 -->

    <!-- Title -->
    
    <title>
        
            BehaviorDesigner 实现NPC 智能机器人 | 
        
        Mr.Metro
    </title>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    
        <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>
    

    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="miccall">
    <meta name="description" content="Blog of miccall is records about my work">
    <meta name="keywords" content="miccall,unity 3d">
    
    

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/logo_miccall.png">
    <link rel="icon" sizes="192x192" href="/img/logo_miccall.png">
    <link rel="apple-touch-icon" href="/img/logo_miccall.png">

    <!--iOS -->
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Mr.Metro">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://miccall.tech">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="BehaviorDesigner 实现NPC 智能机器人 | Mr.Metro">
    <meta property="og:description" content="Blog of miccall is records about my work">
    <meta property="og:article:tag" content="unity 3d"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>!function(){var e="http://"+location.host+"/combo?combo=";window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}},lsloader.removeLS=function(e){try{localStorage.removeItem(e)}catch(e){}},lsloader.setLS=function(e,t){try{localStorage.setItem(e,t)}catch(e){}},lsloader.getLS=function(e){var t="";try{t=localStorage.getItem(e)}catch(e){t=""}return t},lsloader.load=function(e,t,s){s=s||function(){};var n;if(n=this.getLS(e),!/\/\*codestartv1\*\//.test(n))return this.removeLS(e),void this.requestResource(e,t,s);if(n){var a=n.split("/*codestartv1*/")[0];if(a!=t)return console.log("reload:"+t),this.removeLS(e),void this.requestResource(e,t,s);n=n.split("/*codestartv1*/")[1],/\.js?.+$/.test(a)?(this.jsRunSequence.push({name:e,code:n}),this.runjs(t,e,n)):(document.getElementById(e).appendChild(document.createTextNode(n)),s())}else this.requestResource(e,t,s)},lsloader.requestResource=function(e,t,s){var n=this;/\.js?.+$/.test(t)?this.iojs(t,e,function(e,t,s){n.setLS(t,e+"/*codestartv1*/"+s),n.runjs(e,t,s)}):/\.css?.+$/.test(t)&&this.iocss(t,e,function(s){document.getElementById(e).appendChild(document.createTextNode(s)),n.setLS(e,t+"/*codestartv1*/"+s)},s)},lsloader.iojs=function(e,t,s){var n=this;n.jsRunSequence.push({name:t,code:""});try{var a=new XMLHttpRequest;a.open("get",e,!0),a.onreadystatechange=function(){if(4==a.readyState){if((a.status>=200&&a.status<300||304==a.status)&&""!=a.response)return void s(e,t,a.response);n.jsfallback(e,t)}},a.send(null)}catch(s){n.jsfallback(e,t)}},lsloader.iocss=function(e,t,s,n){var a=this;try{var u=new XMLHttpRequest;u.open("get",e,!0),u.onreadystatechange=function(){if(4==u.readyState){if((u.status>=200&&u.status<300||304==u.status)&&""!=u.response)return s(u.response),void n();a.cssfallback(e,t,n)}},u.send(null)}catch(s){a.cssfallback(e,t,n)}},lsloader.iofonts=function(e,t,s,n){var a=this;try{var u=new XMLHttpRequest;u.open("get",e,!0),u.onreadystatechange=function(){if(4==u.readyState){if((u.status>=200&&u.status<300||304==u.status)&&""!=u.response)return s(u.response),void n();a.cssfallback(e,t,n)}},u.send(null)}catch(s){a.cssfallback(e,t,n)}},lsloader.runjs=function(e,t,s){if(t&&s)for(var n in this.jsRunSequence)this.jsRunSequence[n].name==t&&(this.jsRunSequence[n].code=s);if(this.jsRunSequence[0]&&this.jsRunSequence[0].code&&"failed"!=this.jsRunSequence[0].status){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code)),a.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(a),this.jsRunSequence.shift(),this.jsRunSequence.length>0&&this.runjs()}else if(this.jsRunSequence[0]&&"failed"==this.jsRunSequence[0].status){var u=this,a=document.createElement("script");a.src=this.jsRunSequence[0].path,a.type="text/javascript",this.jsRunSequence[0].status="loading",a.onload=function(){u.jsRunSequence.shift(),u.jsRunSequence.length>0&&u.runjs()},document.body.appendChild(a)}},lsloader.tagLoad=function(e,t){this.jsRunSequence.push({name:t,code:"",path:e,status:"failed"}),this.runjs()},lsloader.jsfallback=function(e,t){if(!this.jsnamemap[t]){this.jsnamemap[t]=t;for(var s in this.jsRunSequence)this.jsRunSequence[s].name==t&&(this.jsRunSequence[s].code="",this.jsRunSequence[s].status="failed",this.jsRunSequence[s].path=e);this.runjs()}},lsloader.cssfallback=function(e,t,s){if(!this.cssnamemap[t]){this.cssnamemap[t]=1;var n=document.createElement("link");n.type="text/css",n.href=e,n.rel="stylesheet",n.onload=n.onerror=s;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a)}},lsloader.runInlineScript=function(e,t){var s=document.getElementById(t).innerText;this.jsRunSequence.push({name:e,code:s}),this.runjs()},lsloader.loadCombo=function(t){var s="",n={};for(var a in t){var u=this.getLS(t[a].name);if(u)var o=u.split("/*codestartv1*/")[0],c=u.split("/*codestartv1*/")[1];else var o="";o==t[a].path?this.jsRunSequence.push({name:t[a].name,code:c,path:t[a].path}):(this.jsRunSequence.push({name:t[a].name,code:null,path:t[a].path,status:"comboloading"}),n[t[a].name]=!0,s+=(""==s?"":";")+t[a].path)}var i=this;if(s){var r=new XMLHttpRequest;r.open("get",e+s,!0),r.onreadystatechange=function(){if(4==r.readyState)if(r.status>=200&&r.status<300||304==r.status){if(""!=r.response)return void i.runCombo(r.response,n)}else{for(var e in i.jsRunSequence)n[i.jsRunSequence[e].name]&&(i.jsRunSequence[e].status="failed");i.runjs()}},r.send(null)}this.runjs()},lsloader.runCombo=function(e,t){e=e.split("/*combojs*/"),e.shift();for(var s in this.jsRunSequence)t[this.jsRunSequence[s].name]&&e[0]&&(this.jsRunSequence[s].status="comboJS",this.jsRunSequence[s].code=e[0],this.setLS(this.jsRunSequence[s].name,this.jsRunSequence[s].path+"/*codestartv1*/"+e[0]),e.shift());this.runjs()}}();</script>

    <!-- Import CSS & jQuery -->
    
        <style id="css/material.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/material.min.css","/css/material.min.css?fJTiM/K1J3dWIruo3pxtAw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        <style id="css/style.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/style.min.css","/css/style.min.css?Vwvi0UKsWZkqwcl1aaIPhg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }


    @font-face {
        font-family: 'Material Icons';
        font-style: normal;
        font-weight: 400;
        src: url(/fonts/MaterialIcons-Regular.eot);
        src: url(/fonts/MaterialIcons-Regular.woff2) format('woff2'), url(/fonts/MaterialIcons-Regular.woff) format('woff'), url(/fonts/MaterialIcons-Regular.ttf) format('truetype')
    }



    @font-face {
        font-family: 'FontAwesome';
        src: url(/fonts/fontawesome-webfont.eot?v=4.5.0);
        src: url(/fonts/fontawesome-webfont.eot?#iefix&v=4.5.0) format('embedded-opentype'), url(/fonts/fontawesome-webfont.woff2?v=4.5.0) format('woff2'), url(/fonts/fontawesome-webfont.woff?v=4.5.0) format('woff'), url(/fonts/fontawesome-webfont.ttf?v=4.5.0) format('truetype'), url(/fonts/fontawesome-webfont.svg?v=4.5.0#fontawesomeregular) format('svg');
        font-weight: 400;
        font-style: normal
    }
 

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #7EC0EE !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #7EC0EE !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #7EC0EE !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/img/bg.png);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


        <script>lsloader.load("js/jquery.min.js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==")</script>
        <script>lsloader.load("js/queue.min.js","/js/queue.min.js?FnfjxZSXVYqfU7c7cm3txg==")</script>
    

    

    

    <!-- Custom Head -->
    
<link rel="stylesheet" href="/css/prism-coy.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#BehaviorDesigner-实现NPC-智能机器人"><span class="post-toc-number">1.</span> <span class="post-toc-text">BehaviorDesigner 实现NPC 智能机器人</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#Created-by-miccall-转载请注明出处-miccall-tech"><span class="post-toc-number">1.0.0.0.0.1.</span> <span class="post-toc-text">Created by miccall  (转载请注明出处  miccall.tech)</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#实现物体跟随摄像机视野运动"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">实现物体跟随摄像机视野运动</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-VR实现机器人导航"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">1. VR实现机器人导航</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-问题思考"><span class="post-toc-number">1.1.2.</span> <span class="post-toc-text">2. 问题思考</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-实现以及方法"><span class="post-toc-number">1.1.3.</span> <span class="post-toc-text">3.实现以及方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-中途出现的小BUG"><span class="post-toc-number">1.1.4.</span> <span class="post-toc-text">4.中途出现的小BUG</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#BehaviorDesigner-介绍以及使用方法"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">BehaviorDesigner 介绍以及使用方法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#基本任务"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">基本任务</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-判断是否到达目的地"><span class="post-toc-number">1.2.1.1.</span> <span class="post-toc-text">1.判断是否到达目的地</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-移动到target"><span class="post-toc-number">1.2.1.2.</span> <span class="post-toc-text">2.移动到target</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-停止逻辑"><span class="post-toc-number">1.2.1.3.</span> <span class="post-toc-text">3.停止逻辑</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-第一次停止动画"><span class="post-toc-number">1.2.1.4.</span> <span class="post-toc-text">4.第一次停止动画</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-面向摄像机"><span class="post-toc-number">1.2.1.5.</span> <span class="post-toc-text">5.面向摄像机</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-面向UI"><span class="post-toc-number">1.2.1.6.</span> <span class="post-toc-text">6.面向UI</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-面向UI之后的动作"><span class="post-toc-number">1.2.1.7.</span> <span class="post-toc-text">7.面向UI之后的动作</span></a></li></ol></li></ol></li></ol></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(http://onh0umlhz.bkt.clouddn.com/robot.jpg)">
    
            <p class="article-headline-p">
                BehaviorDesigner 实现NPC 智能机器人
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/BA201701210404530018-00-000000.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>miccall</strong>
        <span>3月 12, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
            <i class="material-icons" role="presentation">devices other</i>
            <span class="visuallyhidden">devices other</span>
        </button>
        <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
            <li class="mdl-menu__item">在其它设备中阅读本文章</li>
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ4AAAEOCAAAAABd2qZ5AAADlElEQVR42u3aQW7jQAwEwPz/07vXAFk73eSM7QVKp8CWJU3pwJDTX38c344vBDhw4MCBAwcOHDhwfDDHV3w8/9XPb/9x42+fP7/L8zu21/zlaXHgwIEDxwWOX0rRgwfNUfJv818l5z9fCw4cOHDguM2Rl73Z5zPQ/C6zteDAgQMHjk/jeHSF5JPn92obSBw4cODA8T9ybJYxG0pumkYcOHDgwPFejnygli9pNtrLafZrwYEDBw4cNzjaUvfJf78034EDBw4cOH5w7I9Z09VC58urnx8HDhw4cBzlmEXW2vhCi5Kc2YYqHp6JAwcOHDgucOTxhRtFera86x0tDhw4cOA4NBxMAgpJfG0Wtms3qPKGsC60OHDgwIFjxJH/OI815MV1FnqbDQeLbSccOHDgwLHmmA0K90O9vGTOAnlRsceBAwcOHNc49ltKeQOWBxpmpTr/VwAHDhw4cJzlaENsbfOWRxbyQt62iAcCDThw4MCBo+Sot2qCBiy5QvtiNq0jDhw4cOB4F0e+yDbo0JbeU/f65TXgwIEDB46jHO2Yr4XLQwb5QPBUM4kDBw4cOF7DMVtY8qCzVi2PUMwCfzhw4MCB4yxHHiOYbfPko73Z6LCNO+DAgQMHjtscbYPUFsK89LbXbDfJcODAgQPH6zlmQ7qEKS/VbTyi3bLCgQMHDhyv52i/ncUU8jYsL/lJI4cDBw4cOG5z7ONoOcepyF3bsOHAgQMHjtdzbMIHs8BB3mi1kYW64cSBAwcOHEc52taoLbo5xz4e0ULgwIEDB457HG3TdWOcly9pNqZ8eD4OHDhw4DjKUWzPjMpn2/7l7Vz7VKuOFgcOHDhwjDhmW02rwVw58tsMB+ttJxw4cODAMeJILpG3fO2S2mvuf4UDBw4cOG5zzJqovADnS8qPlv7YcBAHDhw4cMTbTvv2LLnO7NHzQj58eThw4MCB4yhHu6kza8baop6z5teJonI4cODAgWPNMWuf8uhAu7ykCdzcvZ6V4sCBAweOkqMtV7OWL1nMqdYOBw4cOHB8Ake+zZN/nhfFpDC3r6EoyThw4MCB4xpHHmKYLaClSZ6qpV9F5XDgwIEDxwWOTaxhFkpor9y+Bhw4cODA8V6O5Mb5gmcjwuR5iheAAwcOHDiucbTDwU0k4kar1kb9cODAgQPHPY72lnm7lZ8ziy/khbwotDhw4MCBY8HhwIEDBw4cOHDgwIEDx4cdfwEjXjm6GKHhsQAAAABJRU5ErkJggg==">
        </ul>
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/unity-3d/">unity 3d</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
            <!-- Busuanzi Views -->
            <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <span id="busuanzi_value_page_pv"></span>&nbsp;浏览量
                    </span>
                </li>
            </a>
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=BehaviorDesigner 实现NPC 智能机器人&url=http://miccall.tech//2017/03/12/unity3d/Unity 3d 实现物体跟随摄像机视野运动/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=BehaviorDesigner 实现NPC 智能机器人&url=http://miccall.tech//2017/03/12/unity3d/Unity 3d 实现物体跟随摄像机视野运动/index.html&via=miccall" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://miccall.tech//2017/03/12/unity3d/Unity 3d 实现物体跟随摄像机视野运动/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://miccall.tech//2017/03/12/unity3d/Unity 3d 实现物体跟随摄像机视野运动/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=Mr.Metro&title=BehaviorDesigner 实现NPC 智能机器人&summary=Blog of miccall is records about my work&pics=http://miccall.tech/img/logo_miccall.png&url=http://miccall.tech/2017/03/12/unity3d/Unity 3d 实现物体跟随摄像机视野运动/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <hr>
<h1 id="BehaviorDesigner-实现NPC-智能机器人"><a href="#BehaviorDesigner-实现NPC-智能机器人" class="headerlink" title="BehaviorDesigner 实现NPC 智能机器人"></a>BehaviorDesigner 实现NPC 智能机器人</h1><h6 id="Created-by-miccall-转载请注明出处-miccall-tech"><a href="#Created-by-miccall-转载请注明出处-miccall-tech" class="headerlink" title="Created by miccall  (转载请注明出处  miccall.tech)"></a>Created by miccall  (转载请注明出处  <a href="http://miccall.tech">miccall.tech</a>)</h6><h2 id="实现物体跟随摄像机视野运动"><a href="#实现物体跟随摄像机视野运动" class="headerlink" title="实现物体跟随摄像机视野运动"></a>实现物体跟随摄像机视野运动</h2><h3 id="1-VR实现机器人导航"><a href="#1-VR实现机器人导航" class="headerlink" title="1. VR实现机器人导航"></a>1. VR实现机器人导航</h3><ul>
<li>项目里要求一个机器人跟随在角色旁边，一直飞着，就像一个精灵一样，总在主角的身边，移动，转头，都要移动到合适的位置 。还得让他面向主角，今天就来实现这个样例 。 </li>
</ul>
<h3 id="2-问题思考"><a href="#2-问题思考" class="headerlink" title="2. 问题思考"></a>2. 问题思考</h3><pre><code> - 1. 物体移动到某个给定的位置（target）
 - 2. 物体转动到面向摄像机 
 - 3. 出现在相机的视野当中 
 - 4. 自定义物体在摄影机的Screen中的位置 
</code></pre><h3 id="3-实现以及方法"><a href="#3-实现以及方法" class="headerlink" title="3.实现以及方法"></a>3.实现以及方法</h3><ul>
<li>移动的话 ，本来可以用动画来实现 ，因为动画还没有做好，我就用一个cube当作那个机器人做样例了 。 </li>
<li>首先有个cube之后 ，给他放一个移动的脚本。这里我给他命名为PlayerTank 。</li>
<li>我们的目的就是让他运动到某个target ，所以我们得给他指定一个followTransform 。 同时还有他的移动速度和转动速度 。</li>
<li>为了使他移动不是很突兀，我的思路是他先转动到面向follow物体，然后在直线移动到给物体 。所以算法很快写好了 </li>
</ul>
<pre class="line-numbers language-csharp"><code class="language-csharp">        <span class="token keyword">void</span> <span class="token function">LookTransform</span><span class="token punctuation">(</span>Transform Mtransform<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                Vector3 tarPos <span class="token operator">=</span> Mtransform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
                Vector3 dirRot <span class="token operator">=</span> tarPos <span class="token operator">-</span> transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
                Quaternion tarRot <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">LookRotation</span><span class="token punctuation">(</span>dirRot<span class="token punctuation">)</span><span class="token punctuation">;</span>
                transform<span class="token punctuation">.</span>rotation <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Slerp</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span> tarRot<span class="token punctuation">,</span> rotSpeed <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>简单解释一下，就是先确定物体的位置，然后求出指向他的方向，并用插值的方法，<br>让物体转动到面向指定的物体 。<br>好了，既然有了朝向的运动方向，那么走到这方向，就很简单了。</li>
</ul>
<pre class="line-numbers language-csharp"><code class="language-csharp">          transform<span class="token punctuation">.</span><span class="token function">Translate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> movementSpeed <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>那么什么时候停止运动呢 ，我想了一下，决定用位置的差来判断<br>就是</li>
</ul>
<pre class="line-numbers language-csharp"><code class="language-csharp">        Vector3<span class="token punctuation">.</span><span class="token function">Distance</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span> followTransform<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>好了，既然停止的方法也有了，最后要解决的问题就是朝向摄像机了。<br>   突然一想，这是问题么，对，这不是问题 ，哈哈，刚刚写的那个算法，给一个摄像机就解决了嘛 。<br>   然后给出具体的判断逻辑 。</li>
</ul>
<pre class="line-numbers language-csharp"><code class="language-csharp">        <span class="token comment" spellcheck="true">//该物体 接近要  到达的目标   指定位置后就停止  </span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Vector3<span class="token punctuation">.</span><span class="token function">Distance</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span> followTransform<span class="token punctuation">.</span>position<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">3f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//当物体道到位置时 让物体面 向摄像机 </span>
            <span class="token function">LookTransform</span><span class="token punctuation">(</span>Camre<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//让物体转向 将要运动 的方向 </span>
            <span class="token function">LookTransform</span><span class="token punctuation">(</span>followTransform<span class="token punctuation">)</span><span class="token punctuation">;</span>
            transform<span class="token punctuation">.</span><span class="token function">Translate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> movementSpeed <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>这样就解决了物体移动到target了，下一步就是固定target的位置，让他在摄像机的固定位置了 。<br>新建一个脚本文件CameraView，挂在摄像机上。为了方便调试，我又用了FPS脚本，<br>就是第一人称视角跟随鼠标转动，就跟cs里面的玩法一样，（百度一大推代码）。<br>第二个调试算法是一个国外大牛写的 ，他可以给定一个距离，画出摄像机的视野范围</li>
</ul>
<p><img src="http://img.blog.csdn.net/20170312173313807?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzE0MTE4MjU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<ul>
<li>这里我画了两个边 ，一个是距离摄像机8.5米 用黄色表示，距离摄像机12米的用红色表示。<pre><code>应为篇幅问题和详略问题，这里不多解释这个算法，有兴趣的可以去研究一下，这里我们引用一下就行了。
</code></pre></li>
</ul>
<pre class="line-numbers language-csharp"><code class="language-csharp">      Vector3<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">GetCorners</span><span class="token punctuation">(</span><span class="token keyword">float</span> distance<span class="token punctuation">)</span>
          <span class="token punctuation">{</span>
        Vector3<span class="token punctuation">[</span><span class="token punctuation">]</span> corners <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">float</span> halfFOV <span class="token operator">=</span> <span class="token punctuation">(</span>theCamera<span class="token punctuation">.</span>fieldOfView <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">)</span> <span class="token operator">*</span> Mathf<span class="token punctuation">.</span>Deg2Rad<span class="token punctuation">;</span>
        <span class="token keyword">float</span> aspect <span class="token operator">=</span> theCamera<span class="token punctuation">.</span>aspect<span class="token punctuation">;</span>

        <span class="token keyword">float</span> height <span class="token operator">=</span> distance <span class="token operator">*</span> Mathf<span class="token punctuation">.</span><span class="token function">Tan</span><span class="token punctuation">(</span>halfFOV<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> width <span class="token operator">=</span> height <span class="token operator">*</span> aspect<span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// UpperLeft</span>
        corners<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> tx<span class="token punctuation">.</span>position <span class="token operator">-</span> <span class="token punctuation">(</span>tx<span class="token punctuation">.</span>right <span class="token operator">*</span> width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        corners<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> tx<span class="token punctuation">.</span>up <span class="token operator">*</span> height<span class="token punctuation">;</span>
        corners<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> tx<span class="token punctuation">.</span>forward <span class="token operator">*</span> distance<span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// UpperRight</span>
        corners<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> tx<span class="token punctuation">.</span>position <span class="token operator">+</span> <span class="token punctuation">(</span>tx<span class="token punctuation">.</span>right <span class="token operator">*</span> width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        corners<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> tx<span class="token punctuation">.</span>up <span class="token operator">*</span> height<span class="token punctuation">;</span>
        corners<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> tx<span class="token punctuation">.</span>forward <span class="token operator">*</span> distance<span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// LowerLeft</span>
        corners<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> tx<span class="token punctuation">.</span>position <span class="token operator">-</span> <span class="token punctuation">(</span>tx<span class="token punctuation">.</span>right <span class="token operator">*</span> width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        corners<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> tx<span class="token punctuation">.</span>up <span class="token operator">*</span> height<span class="token punctuation">;</span>
        corners<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> tx<span class="token punctuation">.</span>forward <span class="token operator">*</span> distance<span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// LowerRight</span>
        corners<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> tx<span class="token punctuation">.</span>position <span class="token operator">+</span> <span class="token punctuation">(</span>tx<span class="token punctuation">.</span>right <span class="token operator">*</span> width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        corners<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> tx<span class="token punctuation">.</span>up <span class="token operator">*</span> height<span class="token punctuation">;</span>
        corners<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> tx<span class="token punctuation">.</span>forward <span class="token operator">*</span> distance<span class="token punctuation">;</span>

        <span class="token keyword">return</span> corners<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-csharp"><code class="language-csharp">      <span class="token keyword">void</span> <span class="token function">FindUpperCorners</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        Vector3<span class="token punctuation">[</span><span class="token punctuation">]</span> corners <span class="token operator">=</span> <span class="token function">GetCorners</span><span class="token punctuation">(</span>upperDistance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// for debugging</span>
        Debug<span class="token punctuation">.</span><span class="token function">DrawLine</span><span class="token punctuation">(</span>corners<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> corners<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Color<span class="token punctuation">.</span>yellow<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// UpperLeft -> UpperRight</span>
        Debug<span class="token punctuation">.</span><span class="token function">DrawLine</span><span class="token punctuation">(</span>corners<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> corners<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Color<span class="token punctuation">.</span>yellow<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// UpperRight -> LowerRight</span>
        Debug<span class="token punctuation">.</span><span class="token function">DrawLine</span><span class="token punctuation">(</span>corners<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> corners<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Color<span class="token punctuation">.</span>yellow<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// LowerRight -> LowerLeft</span>
        Debug<span class="token punctuation">.</span><span class="token function">DrawLine</span><span class="token punctuation">(</span>corners<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> corners<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Color<span class="token punctuation">.</span>yellow<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// LowerLeft -> UpperLeft</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>debug的时候，直接调用FindUpperCorners()就可以了 。<br>刚开始的时候 ，我就用的这个调试 ，给出一个位置，然后计算他的偏移量，调试了很久，没有一个良好的效果，我决定换个思路了 ，为了普遍大众 ，我还是把这个调试方法贴出来了，有需要的可以试试 。<br>第二个我就去翻api了 ，因为我貌似记得有个屏幕坐标和世界坐标转化的什么鬼方法来着。果然不出我所料，这个方法的确是相当的好用的呀 。<br>试了一下官方给的调试方法，画了一个点出来 。</li>
</ul>
<pre class="line-numbers language-csharp"><code class="language-csharp">        <span class="token keyword">void</span> <span class="token function">OnDrawGizmosSelected</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Vector3 p <span class="token operator">=</span> theCamera<span class="token punctuation">.</span><span class="token function">ScreenToWorldPoint</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Gizmos<span class="token punctuation">.</span>color <span class="token operator">=</span> Color<span class="token punctuation">.</span>blue<span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//target.position = p;</span>
            Gizmos<span class="token punctuation">.</span><span class="token function">DrawSphere</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token number">1F</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>好了，就连我最后决定用的位置也标明了。<br>然后，我就写了一个很简单的方法来达到目的。</li>
</ul>
<pre class="line-numbers language-csharp"><code class="language-csharp">          <span class="token keyword">void</span> <span class="token function">maketarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">{</span>
              Vector3 p <span class="token operator">=</span> theCamera<span class="token punctuation">.</span><span class="token function">ScreenToWorldPoint</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span>RH<span class="token punctuation">,</span> RV<span class="token punctuation">,</span> upperDistance<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              target<span class="token punctuation">.</span>position <span class="token operator">=</span> p<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>写完我都吓了一跳 ，竟然如此简单。还是简单解释一下 ，RH 是水平偏移量，RV是垂直偏移量，upperDistance是距离摄像机的一个平面位置 。<pre><code>接下来就是运行看效果了 。
</code></pre></li>
</ul>
<h3 id="4-中途出现的小BUG"><a href="#4-中途出现的小BUG" class="headerlink" title="4.中途出现的小BUG"></a>4.中途出现的小BUG</h3><p>-<br>       莫名其妙的做圆周运动 ，然后我分析了线速度，角速度和半径的关系 ，<br>       然后总结出一个基本的规律，他应该是当运动到某个特定的位置 ，正好满足了<br>       圆周运动的关系，然后我们调整movementSpeed 和rotSpeed 的值，让他么尽可能<br>       的和Distance消除乘积关系，这样出现的几率就微乎其微了 。<br>       感想 – 其实unity和现实物理，理论物理 还是有很大的不同。</p>
<h2 id="BehaviorDesigner-介绍以及使用方法"><a href="#BehaviorDesigner-介绍以及使用方法" class="headerlink" title="BehaviorDesigner 介绍以及使用方法"></a>BehaviorDesigner 介绍以及使用方法</h2><ul>
<li><p>Behavior Designer 是一个行为树插件 他提供了可视化编辑器 和强大的 API 可以轻松的创建 tasks（任务）通过决策树的方式判断行为，耦合度更高，更加方便的打造AI系统 。</p>
</li>
<li><p>本教程不是入门教程 ，而是通过一个引导来实现我们的主题 。</p>
</li>
<li><ol>
<li>Sequence 队列节点<br>–   表示顺序执行的节点 此节点下属所有节点依次执行直到返回false</li>
</ol>
</li>
<li><ol>
<li>Selector 选择节点<br>–   表示在此节点下选择一个执行 此节点下属所有节点依次执行直到返回true</li>
</ol>
</li>
<li><p>我们暂且就用这两个 想要了解更多的 ，请参考别的教程 </p>
</li>
</ul>
<h3 id="基本任务"><a href="#基本任务" class="headerlink" title="基本任务"></a>基本任务</h3><ul>
<li>判断是否到达目的地 </li>
<li>移动到目的地(包含起飞和停止动画)</li>
<li>判断是否面向摄像机 </li>
<li>判断是否执相应的动画( 原地浮动 )</li>
<li>判断是否要面向UI物体  </li>
<li>面向UI之后 如果操作 执行相应的动画(点头 摇头 摊手) </li>
</ul>
<h4 id="1-判断是否到达目的地"><a href="#1-判断是否到达目的地" class="headerlink" title="1.判断是否到达目的地"></a>1.判断是否到达目的地</h4><ul>
<li>这个方法在上面的教程已经介绍了解决思路以及代码实现 简单重新陈述一下，首先在摄像机上挂一个脚本 这个脚本用来测量摄像机的范围，在范围内画一个点，让一个target(transform)覆盖这个点 。</li>
<li>VR中摄像机可以根据头盔的传感器，来旋转第一人称视角 这个target就固定在视角的一个地方随意移动 。</li>
<li>那么，机器人的z轴 （forward） 就一直面向这个target。然后使用translate移动到这个target附近。</li>
<li>我们要判断的就是这个target和机器人的distance </li>
<li>我们自己写一个脚本来实现这个小功能（Task）</li>
</ul>
<pre class="line-numbers language-csharp"><code class="language-csharp">        <span class="token keyword">using</span> UnityEngine<span class="token punctuation">;</span>

        <span class="token keyword">namespace</span> BehaviorDesigner<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>Tasks<span class="token punctuation">.</span>Basic<span class="token punctuation">.</span>UnityVector3
        <span class="token punctuation">{</span>
            <span class="token punctuation">[</span><span class="token function">TaskCategory</span><span class="token punctuation">(</span><span class="token string">"Basic/Vector3"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
            <span class="token punctuation">[</span><span class="token function">TaskDescription</span><span class="token punctuation">(</span><span class="token string">"Returns the distance between two Vector3s."</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

            <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">dis_tance</span> <span class="token punctuation">:</span> Action
            <span class="token punctuation">{</span>

                <span class="token punctuation">[</span><span class="token function">Tooltip</span><span class="token punctuation">(</span><span class="token string">"target Vector3"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
                <span class="token keyword">public</span> SharedVector3 firstVector3<span class="token punctuation">;</span>
                <span class="token punctuation">[</span><span class="token function">Tooltip</span><span class="token punctuation">(</span><span class="token string">"The distance"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
                <span class="token punctuation">[</span>RequiredField<span class="token punctuation">]</span>
                <span class="token keyword">public</span> SharedFloat storeResult<span class="token punctuation">;</span>
                <span class="token keyword">public</span> SharedGameObject action<span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//看代码就应该看到 我们需要一个target的位置向量 一个action的GameObject </span>
                <span class="token comment" spellcheck="true">//还有一个距离的返回值 </span>


                <span class="token keyword">public</span> <span class="token keyword">override</span> TaskStatus <span class="token function">OnUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    storeResult<span class="token punctuation">.</span>Value <span class="token operator">=</span> Vector3<span class="token punctuation">.</span><span class="token function">Distance</span><span class="token punctuation">(</span>firstVector3<span class="token punctuation">.</span>Value<span class="token punctuation">,</span> action<span class="token punctuation">.</span>Value<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> TaskStatus<span class="token punctuation">.</span>Success<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">OnReset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    storeResult <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>随后，我们就要判断这个距离的值 ，来给定这个机器人 是否是移动，还是静止 </li>
<li>我们还是来写一个自定义Task 来实现 </li>
</ul>
<pre class="line-numbers language-csharp"><code class="language-csharp">        <span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">;</span>
        <span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic<span class="token punctuation">;</span>
        <span class="token keyword">using</span> UnityEngine<span class="token punctuation">;</span>
        <span class="token keyword">namespace</span> BehaviorDesigner<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>Tasks<span class="token punctuation">.</span>Basic<span class="token punctuation">.</span>UnityVector3 <span class="token punctuation">{</span> 
            <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">comparedis</span> <span class="token punctuation">:</span> Action <span class="token punctuation">{</span>

                <span class="token keyword">public</span> SharedFloat distance<span class="token punctuation">;</span>
                <span class="token keyword">public</span> SharedFloat compare_dis <span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">/*compare_dis 表示一个范围 以distance 减去这个范围 
                表示以target为圆心 画一个compare_dis的球 只要进入这个球 ，说明已经到达目的地  */</span>
                <span class="token keyword">public</span> SharedBool storeResult<span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">/*我们返回一个bool值 他的意思是机器人是否静止 
                  如果和target的计算距离大于0 那么就不是禁止 他就应该移动到target 否则 他是静止的，就应该做相应的动画 
                */</span>
                <span class="token keyword">public</span> <span class="token keyword">override</span> TaskStatus <span class="token function">OnUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    storeResult<span class="token punctuation">.</span>Value <span class="token operator">=</span> distance<span class="token punctuation">.</span>Value <span class="token operator">-</span> compare_dis<span class="token punctuation">.</span>Value <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token keyword">false</span> <span class="token punctuation">:</span> <span class="token keyword">true</span> <span class="token punctuation">;</span> 
                    <span class="token keyword">return</span> TaskStatus<span class="token punctuation">.</span>Success<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">OnReset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>

                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>好了 我们这两个Task已经写好了 然后用一个Sequence  连接两个任务<br><img src="http://onh0umlhz.bkt.clouddn.com/start.png" alt="start"></li>
<li>做完了这个，我们又要分情况讨论了 一个是移动 一个是移动结束 </li>
</ul>
<h4 id="2-移动到target"><a href="#2-移动到target" class="headerlink" title="2.移动到target"></a>2.移动到target</h4><ul>
<li><p>移动到target我们要用一个判断来做相应的事件 首先 我们判断第一步的变量 isstop 看看是否静止 如果是false的话，执行下面的步骤 否则的话 ，跳转到面向摄像机 </p>
</li>
<li><p>下面一层 我们用一个selector节点 来选择一个节点执行<br>选择是播放起飞动画呢 ，还是move呢 </p>
</li>
<li><p>首先播放起飞动画的条件是 isfirstfly 初始值是true 那么开始执行飞行动画 ，执行结束 把这个值设置false false就不进入这个节点 而是去选择执行move 节点 。</p>
</li>
<li><p>动画这个也是一个坑 我用比较长的一段详细讲一下。收悉的朋友可以跳过这一段 。</p>
</li>
</ul>
<p><img src="http://onh0umlhz.bkt.clouddn.com/movenew.png" alt="move"></p>
<p>-looktarget前面也讲过了 movetotarget是封装以后的translate 可以自己动脑去实现一下  </p>
<h4 id="3-停止逻辑"><a href="#3-停止逻辑" class="headerlink" title="3.停止逻辑"></a>3.停止逻辑</h4><p><img src="http://onh0umlhz.bkt.clouddn.com/stop.png" alt="stop"></p>
<h4 id="4-第一次停止动画"><a href="#4-第一次停止动画" class="headerlink" title="4.第一次停止动画"></a>4.第一次停止动画</h4><p><img src="http://onh0umlhz.bkt.clouddn.com/firststop.png" alt="firststop"></p>
<h4 id="5-面向摄像机"><a href="#5-面向摄像机" class="headerlink" title="5.面向摄像机"></a>5.面向摄像机</h4><p><img src="http://onh0umlhz.bkt.clouddn.com/lookcam.png" alt="lookcam"></p>
<ul>
<li>面向摄像机以后 要判断是否已经结束 我们要判断向量的方向来决定 </li>
<li>首先先计算机器人的forward向量 然后机器人位置减摄像机的位置 ，得到一个方向向量 最后判断两个向量的单位向量是否相同 就可以了 </li>
</ul>
<h4 id="6-面向UI"><a href="#6-面向UI" class="headerlink" title="6.面向UI"></a>6.面向UI</h4><ul>
<li>我规定 当外界代码控制修改一个全局变量 就把他设置成true 然后指定一个UI物体 那么下一帧就可以面向UI了 </li>
</ul>
<p><img src="http://onh0umlhz.bkt.clouddn.com/lookUI.png" alt="lookUI"></p>
<h4 id="7-面向UI之后的动作"><a href="#7-面向UI之后的动作" class="headerlink" title="7.面向UI之后的动作"></a>7.面向UI之后的动作</h4><p><img src="http://onh0umlhz.bkt.clouddn.com/UIaction.png" alt="UIaction"></p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    






    <!-- 使用 DISQUS_CLICK -->
    <div id="disqus-comment">
        <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #757575;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load"> 
    <button class="disqus_click_btn">阅读评论（请确保 disqus 可以正常加载）</button>
</div>

<script type="text/ls-javascript" id="disqus-lazy-load-script">
    var disqus_config = function () {
        this.page.url = 'http://miccall.tech/2017/03/12/unity3d/Unity 3d 实现物体跟随摄像机视野运动/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://miccall.tech/2017/03/12/unity3d/Unity 3d 实现物体跟随摄像机视野运动/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
  	

    </div>
    <style>
        #disqus-comment{
            background-color: #eee;
            padding: 2pc;
        }
    </style>




                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2017/03/14/unity3d/shader forge 插件笔记/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/02/02/leapmotion/LEAPMotion猎户座(VR)开发-003-UI/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/preview.gif);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/BA201701210404530018-00-000000.png" alt="miccall's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        316459829@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:316459829@qq.com.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
                <li>
                    <a href="http://shang.qq.com/email/stop/email_stop.html?qq=316459829&amp;sig=a1c657365db7e82805ea4b2351081fc3ebcde159f8ae49b1&amp;tttt=1" target="_blank" title="腾讯 QQ">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">phone</i>
                        
                        腾讯 QQ
                    </a>
                </li>
            
                <li>
                    <a href="http://blog.csdn.net/qq_31411825" target="_blank" title="CSDN">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">user</i>
                        
                        CSDN
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" rel="nofollow">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">18</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Algorithm/">Algorithm<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/Android/">Android<span class="sidebar_archives-count">13</span></a></li><li><a class="sidebar_archives-link" href="/categories/Leap-Motion/">Leap Motion<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/unity-3d/">unity 3d<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/about/" title="简历">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                简历
            </a>
        </li>
        
    
        <li>
            <a href="/group/" title="团队">
                
                    <i class="material-icons sidebar-material-icons">group</i>
                
                团队
            </a>
        </li>
        
    
        <li>
            <a href="/gallery/" title="图库">
                
                    <i class="material-icons sidebar-material-icons">image</i>
                
                图库
            </a>
        </li>
        
    
        <li>
            <a href="/tag/" title="标签">
                
                    <i class="material-icons sidebar-material-icons">dashboard</i>
                
                标签
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Mr.Metro
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->


    <script>lsloader.load("js/lazyload.min.js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==")</script>
    <script>lsloader.load("js/js.min.js","/js/js.min.js?y3mFBzHggMykAk6nhSWv/A==")</script>



    <script>lsloader.load("js/nprogress.js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==")</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>



    
        <script>lsloader.load("js/smoothscroll.js","/js/smoothscroll.js?lOy/ACj5suSNi7ZVFVbpFQ==")</script>
    





    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>










<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Window Load-->
<script type="text/ls-javascript" id="window-load">
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Bing Background -->


<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: canary | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
