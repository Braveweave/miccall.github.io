<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/logo_miccall.png"/>
	<link rel="shortcut icon" href="/img/logo_miccall.png">
	
			    <title>
    Mr.Metro
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    <meta name="keywords" content="miccall" />
    
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	 
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>
    <style type="text/css">
        body:before {
          content: ' ';
          position: fixed;
          top: 0;
          background: url('/img/bg.jpg') center 0 no-repeat;
          right: 0;
          bottom: 0;
          left: 0;
          background-size: cover; 
        }
    </style>

			    
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script async type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
<link rel="stylesheet" href="/css/prism-coy.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">MICCALL</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="/categories/Algorithm/">Algorithm</a></li><li><a class="category-link" href="/categories/Design/">Design</a></li><li><a class="category-link" href="/categories/Unity-3D/">Unity 3D</a>
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="简历">
		                简历
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/" title="团队">
		                团队
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="图库">
		                图库
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tag/" title="标签">
		                标签
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
                    
                    <li>
                        <a title="github" href="https://github.com/miccall" target="_blank" rel="noopener">
                            <i class="icon fa fa-github"></i>
                        </a>
                    </li>
                    
                    <li>
                        <a title="500px" href="http://500px.com" target="_blank" rel="noopener">
                            <i class="icon fa fa-500px"></i>
                        </a>
                    </li>
                    
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url(http://img.blog.csdn.net/20170127120014163?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzE0MTE4MjU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >unity实现3d摇杆结合leapmotion控制实现VR场景移动</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <hr>
<h1 id="unity实现3d摇杆-结合leapmotion控制实现VR场景移动"><a href="#unity实现3d摇杆-结合leapmotion控制实现VR场景移动" class="headerlink" title=" unity实现3d摇杆 结合leapmotion控制实现VR场景移动  "></a><strong> unity实现3d摇杆 结合leapmotion控制实现VR场景移动  </strong></h1><h6 id="Created-by-miccall-转载请注明出处"><a href="#Created-by-miccall-转载请注明出处" class="headerlink" title="Created by miccall  (转载请注明出处)"></a>Created by miccall  (<a href="http://miccall.tech">转载请注明出处</a>)</h6><ul>
<li><p>开发vr很恼火的就是场景的移动 真实地方本来就小，如果vr里面的场景也小，那还玩个啥，所以虚拟现实的场景是很大的 如何实现小空间对大空间的移动，这也是vr开发要解决的问题之一 。</p>
</li>
<li><p>我们老大设想了摇杆操作 我就顺着思路做了一套 先看看基本效果 </p>
</li>
</ul>
<p><img src="http://img.blog.csdn.net/20170127120014163?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzE0MTE4MjU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<ul>
<li>当手移动中间的球时候 ，就像触碰摇杆一样 ，可以向四周摇动 。<br>外面的环是一个指示器 当球触发到环的时候，给一个颜色的变化，让用户知道自己将朝哪一个方向运动 。</li>
</ul>
<p><img src="http://img.blog.csdn.net/20170127120511114?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzE0MTE4MjU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述">  </p>
<ul>
<li><p>下面是一个围棋场地 用来感受自己在环境中的移动。</p>
</li>
<li><p>摄像机 包括controller都在一个游戏物体上面 也很好移植 ，下面就一步步来展示这个的制作过程 。</p>
</li>
</ul>
<h2 id="3d摇杆的基本框架"><a href="#3d摇杆的基本框架" class="headerlink" title="3d摇杆的基本框架"></a>3d摇杆的基本框架</h2><p><img src="http://img.blog.csdn.net/20170127122232664?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzE0MTE4MjU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<ul>
<li>首先建立一个MianPivot的空物体 它代表着游戏人物 到时候可以自己设定 。 </li>
<li>其下呢 ，一个是VR视角 可以选用官方的LMHeadMountedRig 这个预制体 。</li>
<li>另一个就是我门要做的这个摇杆了 。</li>
<li>摇杆分为三部分 BoundaryRing 就是外面的一个指示环 。root是一个中心点 用来归位 sphere是一个移动的球，用手来触碰它 让它在空间中移动，实现摇杆效果 。</li>
</ul>
<h2 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h2><ul>
<li><p>看过摇杆的自动归位 ，一开始是拿弹簧力来实现，但是弹簧回弹的惯性极其的难掌控 ，来回摆动简直让人抓狂 。于是， 果断放弃了unity的弹簧力 改自己写插值移动 ，让它在手不触碰他的时候，就让它移动到root这个点 。</p>
</li>
<li><p>大概一分析就是这么简单的东西了，但是写起来还是比较烦的，bug极其的多，如何判断手的hold 如何判断移动 回弹的触发条件 等等一系列 做出好的效果还是很不容易的。</p>
</li>
<li><p>还有就是状态的类，球是否是移动的状态 手是否是hold的状态 这个也得写个类来管理</p>
</li>
<li><p>那么物体上呢 ，就很简单了 加一个触发器 当触发的时候 改变他们的状态 。</p>
</li>
<li><p>大家自己建立两个球（一个root点 一个移动的球）并把他们放到一个父物体下面，就可以开始写脚本了。</p>
</li>
</ul>
<h2 id="开始写脚本"><a href="#开始写脚本" class="headerlink" title="开始写脚本"></a>开始写脚本</h2><ul>
<li>先在父类上面建立一个Controller脚本 用来管理游戏移动对象， root和sphere 。<br>好 那就先这样写 </li>
</ul>
<pre class="line-numbers language-csharp"><code class="language-csharp">         <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">springController</span> <span class="token punctuation">:</span> MonoBehaviour
            <span class="token punctuation">{</span>
                <span class="token punctuation">[</span><span class="token function">Tooltip</span><span class="token punctuation">(</span><span class="token string">"Navigation Controls the walking game object"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
                <span class="token keyword">public</span> GameObject player<span class="token punctuation">;</span>
                <span class="token punctuation">[</span><span class="token function">Tooltip</span><span class="token punctuation">(</span><span class="token string">"Used to move the navigation ball"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
                <span class="token keyword">public</span> GameObject sphere<span class="token punctuation">;</span>
                <span class="token punctuation">[</span><span class="token function">Tooltip</span><span class="token punctuation">(</span><span class="token string">"The root node of the navigation (reset point)"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
                <span class="token keyword">public</span> GameObject root<span class="token punctuation">;</span>
                Vector3 sphereposition<span class="token punctuation">;</span>
                Vector3 rootposition<span class="token punctuation">;</span>
                <span class="token keyword">float</span> speed <span class="token operator">=</span> <span class="token number">5f</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 导航球复位的速度</span>
                <span class="token comment" spellcheck="true">// Use this for initialization</span>
                <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token comment" spellcheck="true">//获取  初始位置</span>
                    sphereposition <span class="token operator">=</span> sphere<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localPosition<span class="token punctuation">;</span>
                    rootposition <span class="token operator">=</span> root<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localPosition<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment" spellcheck="true">// Update is called once per frame</span>
                <span class="token keyword">void</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token comment" spellcheck="true">//更新   导航球  的位置 </span>
                    sphereposition <span class="token operator">=</span> sphere<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localPosition<span class="token punctuation">;</span>
                    <span class="token function">Movecheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//判断并控制player的移动</span>
                    <span class="token function">setstop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//导航球归位</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">void</span> <span class="token function">setstop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>HandState<span class="token punctuation">.</span>Handstate <span class="token operator">==</span> HandState<span class="token punctuation">.</span>HandStateRelease<span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        <span class="token keyword">float</span> step <span class="token operator">=</span> speed <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">;</span>
                        sphere<span class="token punctuation">.</span><span class="token generic-method function">GetComponent<span class="token punctuation">&lt;</span>Rigidbody<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>velocity <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">;</span>
                        sphere<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localPosition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span>Mathf<span class="token punctuation">.</span><span class="token function">Lerp</span><span class="token punctuation">(</span>sphereposition<span class="token punctuation">.</span>x<span class="token punctuation">,</span> rootposition<span class="token punctuation">.</span>x<span class="token punctuation">,</span> step<span class="token punctuation">)</span><span class="token punctuation">,</span> Mathf<span class="token punctuation">.</span><span class="token function">Lerp</span><span class="token punctuation">(</span>sphereposition<span class="token punctuation">.</span>y<span class="token punctuation">,</span> rootposition<span class="token punctuation">.</span>y<span class="token punctuation">,</span> step<span class="token punctuation">)</span><span class="token punctuation">,</span> Mathf<span class="token punctuation">.</span><span class="token function">Lerp</span><span class="token punctuation">(</span>sphereposition<span class="token punctuation">.</span>z<span class="token punctuation">,</span> rootposition<span class="token punctuation">.</span>z<span class="token punctuation">,</span> step<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//插值算法也可以</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>SphereState<span class="token punctuation">.</span>Spherestate <span class="token operator">==</span> SphereState<span class="token punctuation">.</span>Spherestateclosed<span class="token punctuation">)</span>
                            sphere<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>localPosition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">void</span> <span class="token function">debugshpereposition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"sphereposition"</span> <span class="token operator">+</span> sphereposition<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">void</span> <span class="token function">Movecheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>HandState<span class="token punctuation">.</span>Handstate <span class="token operator">==</span> HandState<span class="token punctuation">.</span>HandStateHold<span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        <span class="token function">startfollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>SphereState<span class="token punctuation">.</span>Spherestate <span class="token operator">==</span> SphereState<span class="token punctuation">.</span>Spherestateclosed<span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        <span class="token function">Stopfollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">void</span> <span class="token function">startfollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    transform<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token generic-method function">GetComponent<span class="token punctuation">&lt;</span>test<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">void</span> <span class="token function">Stopfollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    transform<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token generic-method function">GetComponent<span class="token punctuation">&lt;</span>test<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">void</span> <span class="token function">OnTriggerExit</span><span class="token punctuation">(</span>Collider other<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">issphere</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        HandState<span class="token punctuation">.</span>Handstate <span class="token operator">=</span> HandState<span class="token punctuation">.</span>HandStateRelease<span class="token punctuation">;</span>
                        <span class="token function">setstop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">bool</span> <span class="token function">issphere</span><span class="token punctuation">(</span>Collider other<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> other<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">"Sphere"</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> 
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>然后就是root和sphere上面 各有一个triiger判断的类 </p>
<pre class="line-numbers language-csharp"><code class="language-csharp">        <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">rootTrigger</span> <span class="token punctuation">:</span> SphereState
        <span class="token punctuation">{</span>

            Collider currentcollider<span class="token punctuation">;</span>
            <span class="token keyword">enum</span> currentstate
            <span class="token punctuation">{</span>
                colse<span class="token punctuation">,</span>move
            <span class="token punctuation">}</span>
            currentstate state<span class="token punctuation">;</span> 
            <span class="token keyword">void</span> <span class="token function">OnTriggerEnter</span><span class="token punctuation">(</span>Collider collider<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                currentcollider <span class="token operator">=</span> collider<span class="token punctuation">;</span>
                state <span class="token operator">=</span> currentstate<span class="token punctuation">.</span>colse<span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//spheredebug(collider, "in");</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">void</span> <span class="token function">OnTriggerExit</span><span class="token punctuation">(</span>Collider collider<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                currentcollider <span class="token operator">=</span> collider<span class="token punctuation">;</span>
                state <span class="token operator">=</span> currentstate<span class="token punctuation">.</span>move<span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//spheredebug(collider, "out");</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">bool</span> <span class="token function">isclosed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">Isphere</span><span class="token punctuation">(</span>currentcollider<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>state <span class="token operator">==</span> currentstate<span class="token punctuation">.</span>colse<span class="token punctuation">)</span>
                        <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                    <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">private</span> <span class="token keyword">bool</span> <span class="token function">Isphere</span><span class="token punctuation">(</span>Collider collider<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">return</span> collider<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">"Sphere"</span> <span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">void</span> <span class="token function">spheredebug</span><span class="token punctuation">(</span>Collider collider<span class="token punctuation">,</span><span class="token keyword">string</span> state<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">Isphere</span><span class="token punctuation">(</span>collider<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Sphere"</span><span class="token operator">+</span><span class="token string">"   "</span><span class="token operator">+</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>第二个 </p>
<pre class="line-numbers language-csharp"><code class="language-csharp">        <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HnadTrigger</span> <span class="token punctuation">:</span> HandState
        <span class="token punctuation">{</span>
            <span class="token keyword">int</span>  handcount <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//public Text handcounttext ;</span>
            <span class="token keyword">void</span> <span class="token function">OnTriggerEnter</span><span class="token punctuation">(</span>Collider other<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">IShand</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                   <span class="token comment" spellcheck="true">//handdebug(other, "in");</span>
                   handcount<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">void</span> <span class="token function">OnTriggerExit</span><span class="token punctuation">(</span>Collider other<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">IShand</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                   <span class="token comment" spellcheck="true">//handdebug(other, "out");</span>
                   handcount<span class="token operator">--</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">bool</span> <span class="token function">IShand</span><span class="token punctuation">(</span>Collider other<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">string</span> Collidername <span class="token operator">=</span> other<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>Collidername <span class="token operator">==</span> <span class="token string">"thumb"</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Collidername <span class="token operator">==</span> <span class="token string">"index"</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Collidername <span class="token operator">==</span> <span class="token string">"middle"</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Collidername <span class="token operator">==</span> <span class="token string">"thumb"</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Collidername <span class="token operator">==</span> <span class="token string">"RigidRoundHand_L"</span> <span class="token operator">||</span> Collidername <span class="token operator">==</span> <span class="token string">"RigidRoundHand_R"</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">void</span> <span class="token function">handdebug</span><span class="token punctuation">(</span>Collider other<span class="token punctuation">,</span> <span class="token keyword">string</span> state<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"hand"</span> <span class="token operator">+</span> state<span class="token operator">+</span><span class="token string">" ++++++++++++"</span> <span class="token operator">+</span> Time<span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">bool</span> <span class="token function">ishold</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//print(" ishold() child ");</span>
                <span class="token comment" spellcheck="true">//handcounttext.text = " count"+handcount;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>handcount <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token comment" spellcheck="true">//print("is  hold");</span>
                    <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>这个hold的状态也是搞了我很久 没办法处理判断hold和release两个状态<br>最后想到的用碰撞器的数量来判断吧 ，当进入trigger就加加 出去就减减 最后数量为0 那么就是松开状态了 </li>
<li><p>仅供参考</p>
</li>
<li><p>状态脚本 </p>
</li>
</ul>
<pre class="line-numbers language-csharp"><code class="language-csharp">        <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HandState</span> <span class="token punctuation">:</span> MonoBehaviour <span class="token punctuation">{</span>

            <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> HandStateHold <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
            <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> HandStateRelease <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

            <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> Handstate <span class="token operator">=</span> HandStateRelease <span class="token punctuation">;</span>
            <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token keyword">bool</span> <span class="token function">ishold</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>

                <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">void</span> <span class="token function">setvalue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">ishold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    Handstate <span class="token operator">=</span> HandStateHold<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span>
                   <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">WaitAndPrint</span><span class="token punctuation">(</span><span class="token number">0.5F</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token punctuation">}</span>
            IEnumerator <span class="token function">WaitAndPrint</span><span class="token punctuation">(</span><span class="token keyword">float</span> waitTime<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WaitForSeconds</span><span class="token punctuation">(</span>waitTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//等待之后执行的动作 </span>
                Handstate <span class="token operator">=</span> HandStateRelease<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">void</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token function">setvalue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-csharp"><code class="language-csharp">        <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SphereState</span> <span class="token punctuation">:</span> MonoBehaviour <span class="token punctuation">{</span>

            <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> Spherestateclosed <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> Spherestatemove <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

            <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> Spherestate <span class="token operator">=</span> Spherestateclosed<span class="token punctuation">;</span>

            <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token keyword">bool</span> <span class="token function">isclosed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">void</span> <span class="token function">setvalue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isclosed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    Spherestate <span class="token operator">=</span> Spherestateclosed<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span>
                <span class="token punctuation">{</span>
                    Spherestate <span class="token operator">=</span> Spherestatemove<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">void</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token function">setvalue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>这个就比较简单了 也就不多解释了 有想要源码的 。<br><a href="http://pan.baidu.com/s/1kVdrr99" target="_blank" rel="external">地址</a>  密码 1tcq  </li>
</ul>
<p>4月更新 -重新构建了代码 可能与上面介绍的很大不同 以后会更新介绍 下面是使用方法 - </p>
<h1 id="导航球组件-使用说明"><a href="#导航球组件-使用说明" class="headerlink" title="导航球组件 使用说明"></a>导航球组件 使用说明</h1><h3 id="一-demo讲解"><a href="#一-demo讲解" class="headerlink" title="一.demo讲解"></a>一.demo讲解</h3><ol>
<li>cube  挂了一个自动化代码 ，可以生成一个楼梯的demo</li>
<li>plane是地面 。</li>
<li>newNave就是导航球了 </li>
<li>FPSController是游戏物体 ，全称第一人称游戏控制器 </li>
</ol>
<h3 id="二-导航球组件使用说明"><a href="#二-导航球组件使用说明" class="headerlink" title="二 . 导航球组件使用说明"></a>二 . 导航球组件使用说明</h3><ol>
<li>注意    :   初始化的时候 ，世界坐标必须为000，否侧初始化之后，导航球的位置会有所偏差，且偏差严重 。</li>
<li>Creathuan (c#) : 默认开启 keep default。它用来生成导航球所必要的外部指示器 。需要的参数 ，Bb （一个prefabs 导航球的一个边） Bb1 （root中心点 集成在newNave 中 也许要赋值 ） Parent_ring （生成一圈Bb时，将会把他们移动到该gameobject下面 集成在newNave 中 也许要赋值）</li>
<li>move (c#) : 默认关闭 有代码必要时启动 ，他只有一个start()方法 。用来将newNave移动到某个位置 。它有两个用法 ，你可以指定一个空物体，并给它赋值到init_position_obj参数中 ，这样在启用该脚本时，就可以初始化到这个空物体的位置 ，如果你不指定这个位置，他会根据第二个参数，Vector3 init_position来初始化到这个位置 ，为了避免初始化位置找不到，必须指定一个位置 。</li>
<li><ul>
<li>注意  move 这个脚本是由 Creathuan( c# )这个组件初始化环结束后启用 。你也可以自定义启用 。</li>
</ul>
</li>
<li>playercontroller ( c# ) :  默认关闭 ，keep default  。这个组件由代码启动。只需在没有赋值的情况下给他赋值 。 sp（导航球的滑动球 集成在newNave 中 也许要赋值）  root（导航球的中心点  集成在newNave 中 也许要赋值 ） ALL （导航球的滑动时，所移动的所有物体 自定义赋值 ）speed（导航球滑动时，所有物体移动的速度 默认 0.5f）</li>
</ol>
<h3 id="子物体介绍"><a href="#子物体介绍" class="headerlink" title="子物体介绍"></a>子物体介绍</h3><ol>
<li>navigation 中心物体 包含一个sphere和一个root <ol>
<li>sphere 是leaphand可以滑动的一个球  参数 Sphere （他自己本身 ）speed（ 复位的速度 ） Root （中心点 ）provider（leap ）Ct（newNave的creathuan脚本，用来获取半径 ）  </li>
<li>root是看不见的中心点 </li>
</ol>
</li>
<li>ring 指示器 （具体部件 由代码生成 ） </li>
</ol>
<ul>
<li>好了 ，今天就将怎么多啦 ，祝自己新年快乐。 </li>
</ul>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://miccall.tech/2017/03/25/leapmotion/unity实现3d摇杆结合leapmotion控制实现VR场景移动/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://miccall.tech/2017/03/25/leapmotion/unity实现3d摇杆结合leapmotion控制实现VR场景移动/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
            	<span id="busuanzi_container_site_pv">2018总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
